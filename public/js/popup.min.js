document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".call-back"),s=document.querySelector(".popup"),t=document.querySelector(".success"),d=document.querySelector(".popup__form"),c=document.querySelector(".popup__toggle"),a=document.querySelector(".success__toggle"),l=document.querySelector(".success__close");e.forEach((e=>{e&&e.addEventListener("click",(()=>{s.classList.remove("visually-hidden")}))})),d.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation();let c=new FormData(d),a=new XMLHttpRequest;a.open("POST",d.action),a.onreadystatechange=()=>{200==a.status&&(t.classList.remove("visually-hidden"),s.classList.add("visually-hidden"))},a.send(c)})),c.addEventListener("click",(()=>{s.classList.add("visually-hidden")})),a.addEventListener("click",(()=>{t.classList.add("visually-hidden")})),l.addEventListener("click",(()=>{t.classList.add("visually-hidden")})),document.addEventListener("keydown",(e=>{"Escape"!==e.key&&"Esc"!==e.key||(s.classList.add("visually-hidden"),t.classList.add("visually-hidden"))})),s.addEventListener("click",(e=>{e.target.classList.contains("popup")&&s.classList.add("visually-hidden")})),t.addEventListener("click",(e=>{e.target.classList.contains("success")&&t.classList.add("visually-hidden")}))}));