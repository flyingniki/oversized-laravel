document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".call-back"),t=document.querySelector(".popup"),s=document.querySelector(".success"),d=document.querySelector(".calculator__form"),c=document.querySelectorAll(".callback-form"),a=document.querySelector(".popup__toggle"),l=document.querySelector(".success__toggle"),n=document.querySelector(".success__close");function i(e,t,s){let d=new FormData(e),c=new XMLHttpRequest;c.open("POST",e.action),c.onreadystatechange=()=>{200==c.status&&4==c.readyState&&(t.classList.remove("visually-hidden"),s.classList.add("visually-hidden"))},c.send(d)}function o(e){let t=e.querySelector(".policy__input"),s=e.querySelector('button[type="submit"]');t.addEventListener("input",(()=>{t.checked?s.disabled=!1:s.disabled=!0}))}e.forEach((e=>{e&&e.addEventListener("click",(()=>{t.classList.remove("visually-hidden")}))})),o(d),d.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation(),i(d,s,t)})),c.forEach((e=>{o(e),e.addEventListener("submit",(d=>{d.preventDefault(),d.stopPropagation(),i(e,s,t)}))})),a.addEventListener("click",(()=>{t.classList.add("visually-hidden")})),l.addEventListener("click",(()=>{s.classList.add("visually-hidden")})),n.addEventListener("click",(()=>{s.classList.add("visually-hidden")})),document.addEventListener("keydown",(e=>{"Escape"!==e.key&&"Esc"!==e.key||(t.classList.add("visually-hidden"),s.classList.add("visually-hidden"))})),t.addEventListener("click",(e=>{e.target.classList.contains("popup")&&t.classList.add("visually-hidden")})),s.addEventListener("click",(e=>{e.target.classList.contains("success")&&s.classList.add("visually-hidden")}))}));